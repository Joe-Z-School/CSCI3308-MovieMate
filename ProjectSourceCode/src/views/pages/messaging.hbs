{{> nav}}

<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
<link rel="stylesheet" href="../resources/css/messaging.css">
<script src="/socket.io/socket.io.js"></script>
<script src="../../resources/js/messagingScript.js" defer></script>

<div class="container-fluid">
  <!-- Friends List Section -->
  <div class="col-md-2 col-sm-12 friends-list">
    <h5>Friends List</h5>
    <div class="friends-list-content">
        <!-- Favorites -->
        <h6 class="px-3 mt-3">Favorites</h6>
        <ul class="list-group list-group-flush" id="favorites">
          {{#each favorites}}
          <li class="list-group-item">
            {{this.name}} <span class="badge bg-warning">{{this.status}}</span>
          </li>
          {{/each}}
        </ul>

        <!-- Unread Messages -->
        <h6 class="px-3 mt-3">Unread Messages</h6>
        <ul class="list-group list-group-flush" id="unread">
          {{#each unreadMessages}}
          <li class="list-group-item">
            {{this.name}} <span class="badge bg-danger">Unread</span>
          </li>
          {{/each}}
        </ul>

        <!-- Online Friends -->
        <h6 class="px-3 mt-3">Online Friends</h6>
        <ul class="list-group list-group-flush" id="online">
          {{#each onlineFriends}}
          <li class="list-group-item">
            {{this.name}} <span class="badge bg-success">Online</span>
          </li>
          {{/each}}
        </ul>

        <!-- All Friends -->
        <h6 class="px-3 mt-3">All Friends</h6>
        <ul class="list-group list-group-flush" id="all-friends">
          {{#each allFriends}}
          <li class="list-group-item">{{this.name}}</li>
          {{/each}}
        </ul>
      </div>
    </div>

    <!-- Chat Area Section -->
    <div class="col-md-10 col-sm-12 chat-area">
    <div class="chat-header">
        <h5 id="chat-user-name">Chatting with: {{activeUser.name}}</h5>
        <p id="typing-status" class="text-muted small"> </p>
      </div>

      <div class="chat-body" id="chat-messages">
        <!-- Messages will be dynamically appended here -->
      </div>

      <div class="chat-footer">
      <div class="d-flex">
          <!-- Message Input -->
          <input
            type="text"
            id="message-input"
            class="form-control me-2"
            placeholder="Type a message..."
          />
          <!-- Emojis Button -->
          <button id="emoji-btn" class="btn btn-outline-secondary me-2">
            <i class="bi bi-emoji-smile"></i>
        </button>
          <!-- File Upload Button -->
          <label for="file-input" class="btn btn-primary me-2">ðŸ“· </label>
            <input type="file" id="file-input" class="d-none" accept="image/*" />
          <!-- Send Button -->
          <button id="send-btn" class="btn btn-primary">Send</button>
        </div>
      </div>
    </div>
  </div>
</div>